<div class="container" *ngIf="path === 'edit'; else viewInfo">
  <h2>Edit {{country.name.common}}</h2>
  <form [formGroup]="form" (ngSubmit)="saveDetails()">
    <mat-form-field appearance="fill">
      <mat-label> Name </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the name" formControlName="name" #nameInput>
      @if (form.get('name')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Currencies </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the currencies" formControlName="currencies" #currenciesInput>
      @if (form.get('currencies')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Capital </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the capital" formControlName="capital" #capitalInput>
      @if (form.get('capital')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Cca2 </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the cca2" formControlName="cca2" #cca2Input>
      @if (form.get('cca2')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Flag </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the flag" formControlName="flag" #flagInput>
      @if (form.get('flag')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Region </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the region" formControlName="region" #regionInput>
      @if (form.get('region')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label> Population </mat-label>
      <input matInput maxlength="15" type="text" placeholder="Type in the population" formControlName="population" #populationInput>
      @if (form.get('population')?.hasError) {
        <mat-error>{{errorMessage}}</mat-error>
      }
    </mat-form-field>

    <div class="form-element">
      <button mat-flat-button color="primary" type="submit" [disabled]="!form.valid">Submit Form</button>
    </div>
  </form>
</div>

<ng-template #viewInfo>
  <div class="container">
    <h2>{{country.name.official}}</h2>
    <div class="row">
      <div class="col-md-6">
        <img class="country-img" src="{{country.flags.svg}}" alt="{{country.name.official}}" width="100%">
      </div>
      <div class="col-md-6">
        <h3>{{country.name.common}}</h3>
        <h3>{{country.name.official}}</h3>
        <p>Region: {{country.region}}</p>
        <p>Sub Region: {{country.subregion}}</p>
        <p>Capital: {{country.capital[0]}}</p>
        <p>Population: {{country.population}}</p>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-md-6">
        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Language Translations</mat-panel-title>
            </mat-expansion-panel-header>
            <ul *ngFor="let item of country.altSpellings">
              <li>{{item}}</li>
            </ul>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Spoken Languages</mat-panel-title>
            </mat-expansion-panel-header>
            <ul *ngFor="let item of languages">
              <li>{{item}}</li>
            </ul>
          </mat-expansion-panel>
        </mat-accordion>        
      </div>
      <div class="col-md-6">
        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title>Neighbouring Countries</mat-panel-title>
            </mat-expansion-panel-header>
            <ul *ngFor="let item of country.borders">
              <li>{{item}}</li>
            </ul>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Maps</mat-panel-title>
            </mat-expansion-panel-header>
            <p>Maps</p>
          </mat-expansion-panel>
        </mat-accordion>        
      </div>
    </div>
  </div>
</ng-template>
